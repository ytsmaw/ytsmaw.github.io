 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
<title>Random Imgur Image Retriever</title>

<link rel="image_src" href="http://i.imgur.com/5U9zagO.jpg" / >
    <meta property="og:image" content="http://i.imgur.com/5U9zagO.jpg" />
    <meta property="og:URL" content="anametobeproudof.tumblr.com" />

<script type="text/javascript">
var imgArray = [];
var index = 0;
var direction = 1;
var imcode = "poop";
var stats = false;
var arrayln = 0;

var myImg = function () {
	huh: 0;
};

myImg.prototype  = {

	//imgArray: [],
	img: new Image(),
     //"GD6yn",
	

	
	randUrl: function () {
		//make a vector of all possible letters and numbers!
        var ran = ['1', '2', '3', '4', '5', '6', '7', '8', '9', '0', "a", "b", "c", "d", 'e', "f", "g", "h", "i", "j", "k", "l", "m", "n", 'o', 'p', 'q', 'r', 's', 't', 'u', 'v', 'w', 'x', 'y', 'z', 'Q', 'W', 'E', 'R', 'T', 'Y', 'U', 'I', 'O', 'P', 'A', 'S', 'D', 'F', 'G', 'H', 'J', 'K' ,'L', 'Z', 'X', 'C', 'V', 'B', 'N', 'M'];
        //create a rancom combo of these letters and numbers!
        if (Math.round(Math.random()*10) > 11){
            var doce = ran[ Math.floor(Math.random() * 62) ] + ran[ Math.floor(Math.random() * 62) ] + ran[ Math.floor(Math.random() * 62) ] + ran[ Math.floor(Math.random() * 62) ];
        }else{
            var doce = ran[ Math.floor(Math.random() * 62) ] + ran[ Math.floor(Math.random() * 62) ] + ran[ Math.floor(Math.random() * 62) ] + ran[ Math.floor(Math.random() * 62) ] + ran[ Math.floor(Math.random() * 62) ] + ran[ Math.floor(Math.random() * 62) ];
        }
		//alert(doce);
        return doce;	
	},
	
	
	
	create: function () {
		//create an image object
		this.img.id = "SexPalace";
		var imarr = [];
		//show the image!
		document.body.appendChild(this.img);
		
		// make an easier varuiable!
		var im = document.querySelector('#SexPalace');
		var whop = 0;
		
		//check if a real image loaded
		im.onload = function() {
			// makde sure it isn't that does not exist image
			if (im.naturalWidth != 161 && im.naturalHeight != 81){
				whop = 1;
				//alert("nice");
				//myImg.prototype.format(imcode);
				var imc = [imcode];
				if (direction == 1 || direction == 2){ imarr = imarr.concat( imc ); }
				else if (direction == -1){ imarr = imc.concat( imarr ); }
				imgArray = imarr;
				arrayln = imgArray.length;
				// this if is so that prog foolows the correct link
				if(index == arrayln-1 || index == 1){
					myImg.prototype.format(imcode);
					
				}
				if (stats){document.getElementById("arr").innerHTML = "array length: " + arrayln + " index: " + (index+1);}
				//document.getElementById("arr").innerHTML = "array: " + imarr + "  index: " + index;
				
			} else {
				imcode = myImg.prototype.randUrl();
				document.getElementById("progress").innerHTML = imcode;
				im.src ="http://i.imgur.com/" + imcode + ".gif";
			}
			// woo yey image loaded
		}
		
		im.onerror = function () {
			if (whop == 0){ // if the image isn't already loaded and there is an error, make a new image
				imcode = myImg.prototype.randUrl();
				document.getElementById("progress").innerHTML = imcode;
				im.src ="http://i.imgur.com/" + imcode + ".gif";
				//alert("error!");
			}
		}
		
		im.onclick = function () {
			myImg.prototype.change(2);
		}
		
		
		//basically just creates an event & changes the souce if there is
		//no real image on the end
		
		im.src = "http://i.imgur.com/" + imcode + ".gif";
		myImg.prototype.format(imcode);
		//index = 1;
	},
	
	
	
	
	format: function (code) {
		var im = document.querySelector('#SexPalace');
		var w = window,
			d = document,
			e = d.documentElement,
			g = d.getElementsByTagName('body')[0],
			x = w.innerWidth || e.clientWidth || g.clientWidth,
			y = w.innerHeight|| e.clientHeight|| g.clientHeight;
			x = .95 * x;
			y = 1.5 * y;
	
	   var style = "#SexPalace{ display: block; margin: auto auto; max-width:" + x + "px; max-height:" + y + "px; }";
	   	var siz = "";
		document.getElementById("wow").innerHTML = style;
		
		if (im.naturalWidth > x || im.naturalHeight > y){siz = " (small)";}
		document.getElementById("progress").innerHTML = "<a style='color:#1BB76E' target = 'new' href= '" + "https://imgur.com/gallery/" + code + "'>"+code+"</a>"+ siz;
		
		//alert("ImSetup Done!");
		
	},
	
	
	
	change: function (dir) {
		
		direction = dir;
		var im = document.querySelector('#SexPalace');
		var broken = "http://i.imgur.com/0.gif"
		if (index == 0 && direction == -1){ 
			imcode = myImg.prototype.randUrl();
			document.getElementById("progress").innerHTML = imcode;
			im.src ="http://i.imgur.com/" + imcode + ".gif";
			}
		else if (index >= imgArray.length-1 && direction == 1) {
			imcode = myImg.prototype.randUrl();
			document.getElementById("progress").innerHTML = imcode;
			im.src ="http://i.imgur.com/" + imcode + ".gif";
			index = index + 1;
			}
		else if (direction == 2) { 
			imcode = myImg.prototype.randUrl();
			document.getElementById("progress").innerHTML = imcode;
			im.src ="http://i.imgur.com/" + imcode + ".gif";
			index = imgArray.length;
		}
		else { 
			index = index + direction;
			im.src = "http://i.imgur.com/" + imgArray[ index ] + ".gif"; 
			myImg.prototype.format(imgArray[index]);
			
			direction = 0;
			}
		//alert("Array Len: "+ imgArray.length + "  Index: " + index);
		
			
	},
	
	
	array: function (arr) {
		var array;
		if (arr == "load"){ return array; }
		else { array = arr; }
	},
	
	
	disp: function(){
		document.write("wow classes sure do rule! ");
	}
}

//window.onload() = poop.disp();
</script>

</head>

<body>
<style id="wow"> </style>
<p id = "head"> Random Imgur Image Retriever</p>
<div id="progress"> hot sex </div>

<style>
	body{
		background: #34373C;
		align: center;
	}
	#head{ color: white;
		text-align: center;
		margin-bottom: -2px;
	}
	#progress{ color: #1BB76E;
		text-align: center;
		margin-bottom: 10px
	}
	#arr{ margin: 0 auto;
		color: white;
		text-align: center;
		width: 20%;
	}
	
</style>

<script type="text/javascript">
	var Img = new myImg();

	Img.create();
	
	// use the left and right arrows if the image or document has focus
	$(Img.img).keydown(function(e){
		
		if (e.keyCode == 39) {
			//alert("right arrow!");
			Img.change(1);
		}
		if (e.keyCode == 37) {
			//alert("left Arrow!");
			Img.change(-1);
		}
	});
	
	$(document).keydown(function(e){
		
		 switch(e.keyCode) {
			case 39:
				Img.change(1); // right arrow
				break;
			case 37:
				Img.change(-1); // left arrow
				break;
			case 32:
				stats = !stats;
				break;
				
		}
	if (stats){ 	
	document.getElementById("arr").innerHTML = "array length: " + arrayln + " index: " + (index+1);}
	else{
		document.getElementById("arr").innerHTML = ""
		}
		
	});
</script>
<div id = "arr"></div>

</body>
</html>
